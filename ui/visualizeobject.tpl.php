<?php 
/* customise template based on page arguments : 
 * arg(0) == 'repository'
 * arg(1) == apiType (e.g. 'artfacts', 'versions', 'works', 'agents' etc.)
 * arg(2) == apiOperation (optional e.g. 'add' or 'edit')
 */
$modulePrefix = arg(0);
$apiType = substr(arg(1),0,-1); // remove the trailing 's'
$existingId = arg(3);
$project = null;
if (isset($_GET['project'])) {
 $project = $_GET['project'];
}
$tag = null;
if (isset($_GET['tag'])) {
 $tag = $_GET['tag'];
}
if (!isset($mapLat)){
 $mapLat = -24.994167;
}
if (!isset($mapLong)) {
 $mapLong = 134.866944;
}
if (!isset($mapZoom)) {
 $mapZoom = 4;
}
?>
<div id="alerts"></div>
<div id="metadata"
 <?php if (austese_access('edit metadata', $project)): ?>
  data-editable="true"
 <?php endif; ?>
 <?php if ($project):?>
 data-project="<?php print $project; ?>"
 <?php endif; ?>
 <?php if ($tag):?>
 data-tag="<?php print $tag; ?>"
 <?php endif; ?>
 <?php if ($existingId):?>
   data-existingid="<?php print $existingId; ?>"
 <?php endif; ?>
 data-moduleprefix="<?php print $modulePrefix; ?>"
 data-maplat="<?php print $mapLat; ?>"
 data-maplong="<?php print $mapLong; ?>"
 data-mapzoom="<?php print $mapZoom; ?>"
 data-modulepath="<?php print drupal_get_path('module', 'repository'); ?>"
 data-servername="<?php print $_SERVER['SERVER_NAME']; ?>"
 data-apitype="<?php print $apiType;?>">
</div>

<div id="canvas" style="width:100%;height:600px"><div id="loadingvis" style="text-align:center">Loading...</div></div>
